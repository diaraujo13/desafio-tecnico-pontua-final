---
description: "Documentation Standards and Architectural Documentation Rules"
globs:
  - "**/*.md"
  - "**/*.mdx"
  - "**/README*"
  - "**/CONTRIBUTING*"
  - "**/docs/**/*"
alwaysApply: true
---

# Documentation Rules (NON-NEGOTIABLE)

This document defines how documentation must be written for this project.
AI tools MUST follow these rules to avoid architectural drift and ambiguity.

---

## 1. Documentation Philosophy

### 1.1 Architecture First

Documentation must:
- Reflect **actual architecture**, not intentions
- Reinforce **Clean Architecture boundaries**
- Make architectural violations obvious
- Be explicit rather than generic
- Be written in PT-BR (Brazilian Portuguese)

Documentation that introduces ambiguity is considered incorrect.

---

### 1.2 Audience

Documentation is written for:
- Senior engineers
- Future maintainers
- AI tools (Cursor, Gemini, Copilot)

Assume no access to prior context beyond the repository.

---

## 2. README.md Structure (MANDATORY)

Every README MUST follow this structure:

```md
# Project Name

Short description of what the app does and its domain purpose.

## üöÄ Quick Start

```bash
npm install
cd ios && pod install
npm run ios
npm run android

üìã Requirements
	‚Ä¢	Node.js 18+
	‚Ä¢	React Native 0.83.1+
	‚Ä¢	React 19
	‚Ä¢	Android Studio / Xcode

üèóÔ∏è Architecture

This project follows Clean Architecture:
	‚Ä¢	Domain (business rules, entities, DomainErrors)
	‚Ä¢	Application (Use Cases)
	‚Ä¢	Infrastructure (API, storage)
	‚Ä¢	Presentation (Hooks, UI)

Key Rules
	‚Ä¢	DomainError is the ONLY error contract
	‚Ä¢	No application/services layer
	‚Ä¢	Hooks call Use Cases via the Composition Root
	‚Ä¢	No business logic in UI

üìÅ Project Structure

src/
‚îú‚îÄ‚îÄ domain/
‚îú‚îÄ‚îÄ application/
‚îú‚îÄ‚îÄ infrastructure/
‚îú‚îÄ‚îÄ presentation/
‚îî‚îÄ‚îÄ main/            # Composition Root

üß™ Testing

npm test               # unit (domain + application)
npm run test:integration
npm run test:e2e

üìÑ License

---

## 3. Architecture Documentation

### 3.1 Mandatory Files

The following files are **architectural sources of truth** and must be kept consistent:

- `architecture.mdc`
- `core/performance.mdc`
- `docs/adr/*.md`

Documentation MUST NOT contradict these files.

---

### 3.2 ADRs (Architecture Decision Records)

All non-trivial decisions MUST be documented as ADRs.

ADR template:

```md
# ADR-XXX: <Decision Title>

## Status
Accepted | Superseded | Deprecated

## Context
What problem exists and why it matters.

## Decision
What was chosen and why.

## Consequences
### Positive
### Negative
### Mitigations

Forbidden:
	‚Ä¢	Undocumented architectural changes
	‚Ä¢	‚ÄúImplicit‚Äù decisions
	‚Ä¢	Silent refactors

‚∏ª

4. Code Documentation Rules

4.1 Domain Layer

Domain documentation MUST:
	‚Ä¢	Describe business meaning
	‚Ä¢	Avoid UI or technical references
	‚Ä¢	Describe invariants and rules

Example:

/**
 * Thrown when a vacation request is approved
 * after it has already been rejected.
 *
 * Business Rule:
 * A vacation request can only transition
 * from PENDING ‚Üí APPROVED or REJECTED.
 */
export class InvalidVacationStatusTransitionError extends DomainError {}


‚∏ª

4.2 Use Cases (Application Layer)

Use Case documentation MUST:
	‚Ä¢	Describe the business intent
	‚Ä¢	Describe preconditions and outcomes
	‚Ä¢	Document returned DomainErrors

Example:

/**
 * Approves a vacation request.
 *
 * Rules:
 * - Only managers can approve
 * - Request must be PENDING
 *
 * Returns:
 * - InvalidVacationStatusTransitionError
 * - UserNotManagerError
 */


‚∏ª

4.3 Hooks (Presentation Layer)

Hooks documentation MUST:
	‚Ä¢	Describe UI intent
	‚Ä¢	NEVER describe business logic
	‚Ä¢	NEVER describe caching as business behavior

Example:

/**
 * UI hook to load vacation history.
 *
 * Responsibilities:
 * - Calls GetVacationHistoryUseCase
 * - Handles loading and error state
 * - Does not filter or interpret data
 */


‚∏ª

5. Error Documentation Rules (CRITICAL)

5.1 Error Contract

Documentation MUST state clearly:
	‚Ä¢	DomainError is the ONLY error contract
	‚Ä¢	No AppError exists
	‚Ä¢	No error normalization is allowed
	‚Ä¢	DomainErrors must propagate unchanged

Forbidden documentation patterns:
	‚Ä¢	‚ÄúThis function may throw Error‚Äù
	‚Ä¢	‚ÄúReturns string error message‚Äù
	‚Ä¢	‚ÄúConverts errors for UI‚Äù

‚∏ª

6. Performance Documentation

Performance documentation MUST:
	‚Ä¢	Reference core/performance.mdc
	‚Ä¢	Avoid speculative optimization claims
	‚Ä¢	Never justify architectural shortcuts

Forbidden phrases:
	‚Ä¢	‚ÄúOptimized by skipping Use Case‚Äù
	‚Ä¢	‚ÄúHandled directly in UI for performance‚Äù

‚∏ª

7. Migration & Change Logs

Migration docs MUST:
	‚Ä¢	State breaking changes explicitly
	‚Ä¢	Include before/after examples
	‚Ä¢	Mention affected layers

‚∏ª

8. Troubleshooting Guides

Troubleshooting MUST:
	‚Ä¢	Map symptoms ‚Üí causes ‚Üí fixes
	‚Ä¢	Avoid guessing
	‚Ä¢	Avoid recommending architecture violations

‚∏ª

9. AI Enforcement Rules (HARD STOP)

AI tools MUST:
	‚Ä¢	Respect architectural boundaries in documentation
	‚Ä¢	Never invent undocumented layers
	‚Ä¢	Never document forbidden patterns
	‚Ä¢	STOP and ask if documentation conflicts with architecture.mdc

‚∏ª

10. Final Rule

Documentation is executable architecture.
If it lies, the system rots.

Any documentation that contradicts architecture
is considered a bug.

---

## What this adaptation does (important)

‚úî Aligns with **React Native + React 19**  
‚úî Enforces **DomainError-only model**  
‚úî Explicitly forbids `application/services`  
‚úî Teaches LLMs how hooks, Use Cases, and Domain relate  
‚úî Treats documentation as an **architectural artifact**, not prose  
